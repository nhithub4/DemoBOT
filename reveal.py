from telegram import Update, ChatMember
from telegram.ext import CallbackContext
import datetime

async def reveal(update: Update, context: CallbackContext) -> None:
    # ุชุญูู ูู ุฃู ุงููุณุชุฎุฏู ูู ูุดุฑู
    chat_member = await context.bot.get_chat_member(update.effective_chat.id, update.effective_user.id)
    if chat_member.status not in [ChatMember.ADMINISTRATOR, ChatMember.OWNER]:
        await update.message.reply_text("ูุฐุง ุงูุฃูุฑ ูุชุงุญ ููุท ูููุดุฑููู.")
        return
    
    # ุชุญูู ูู ูุฌูุฏ ุฑุณุงูุฉ ุฑุฏ
    reply = update.message.reply_to_message
    if reply:
        user_id = reply.from_user.id
        user = reply.from_user
        
        # ูููููุง ุงูุญุตูู ุนูู ุชุงุฑูุฎ ุงูุงูุถูุงู ููุท ูู ุฎูุงู ูุนูููุงุช ุงููุฌููุนุฉ
        chat_member_info = await context.bot.get_chat_member(update.effective_chat.id, user_id)
        join_date = "ูุนูููุงุช ูุฑุงูุง ุงูุฅุฏูู ููุท"  # Telegram API ูุง ูููุฑ ุชุงุฑูุฎ ุงูุงูุถูุงู ูุจุงุดุฑุฉ
        
        status = chat_member_info.status
        # ููุง ุชุถุน ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจุงูุฅูุฐุงุฑุงุชุ ุงูุชูุงุนูุ ููุฏุฉ ุงูููุฏ
        warnings = "ูุนูููุงุช ูุฑุงูุง ุงูุฅุฏูู ููุท"  # ูุฌุจ ููุฆูุง ูู ูุงุนุฏุฉ ุจูุงูุงุช ุฃู ุทุฑููุฉ ุฃุฎุฑู
        engagement = "ูุนูููุงุช ูุฑุงูุง ุงูุฅุฏูู ููุท"  # ูุฌุจ ููุฆูุง ูู ูุงุนุฏุฉ ุจูุงูุงุช ุฃู ุทุฑููุฉ ุฃุฎุฑู
        restriction_expiry = "ูุนูููุงุช ูุฑุงูุง ุงูุฅุฏูู ููุท"  # ูุฌุจ ููุฆูุง ูู ูุงุนุฏุฉ ุจูุงูุงุช ุฃู ุทุฑููุฉ ุฃุฎุฑู
        rank = "ูุนูููุงุช ูุฑุงูุง ุงูุฅุฏูู ููุท"  # ูุฌุจ ููุฆูุง ูู ูุงุนุฏุฉ ุจูุงูุงุช ุฃู ุทุฑููุฉ ุฃุฎุฑู
        
        # ุฅุนุฏุงุฏ ุงูุฑุณุงูุฉ
        info_message = (
            f"ูุนูููุงุช ุงูุนุถู:\n"
            f"โซ๏ธุงุณู ุงููุณุชุฎุฏู: {user.full_name}\n"
            f"โซ๏ธุฑูุฒ ุงููุณุชุฎุฏู: @{user.username}\n"
            f"โซ๏ธุงููุนุฑู: {user.id}\n"
            f"โซ๏ธุชุงุฑูุฎ ุงูุฅูุถูุงู: {join_date}\n"
            f"โซ๏ธุญุงูุฉ ุงููุณุชุฎุฏู: {status}\n"
            f"โซ๏ธุงูุฅูุฐุงุฑุงุช: {warnings}\n"
            f"โซ๏ธุงูุชูุงุนู: {engagement}\n"
            f"โซ๏ธุชุงุฑูุฎ ูู ุงูุชูููุฏ: {restriction_expiry}\n"
            f"โซ๏ธุงูุฑุชุจุฉ: {rank}\n"
        )
        await update.message.reply_text(info_message)
    else:
        await update.message.reply_text(
            "ุทุฑููุฉ ุงูุนูู๐:\n\n"
            "โช๏ธูู ุจุงูุฑุฏ ุนูู ุฑุณุงูุฉ ุงูุนุถู\n"
            "โช๏ธุงุณุชุฎุฏู ุงูุฃูุฑ ูุน @ููุฒุฑ ุงูุนุถู\n"
            "โช๏ธุฃู ุงุณุชุฎุฏู ุงูุฃูุฑ ูุน ูุนุฑู [ุงูุฑูู] ุงูุนุถู\n\n"
            "ุณุชุธูุฑ ูุนูููุงุช ุงูุนุถู ูู ุฑุฏ ุนูู ุฑุณุงูุชูุ ููู:\n"
            "โซ๏ธุงุณู ุงููุณุชุฎุฏู\n"
            "โซ๏ธุฑูุฒ ุงููุณุชุฎุฏู\n"
            "โซ๏ธุงููุนุฑู\n"
            "โซ๏ธุชุงุฑูุฎ ุงูุงูุถูุงู\n"
            "โซ๏ธุญุงูุฉ ุงููุณุชุฎุฏู\n"
            "โซ๏ธุงูุฅูุฐุงุฑุงุช\n"
            "โซ๏ธุงูุชูุงุนู\n"
            "โซ๏ธุฅุฐุง ูุงู ูููุฏุ ุณูุธูุฑ ุชุงุฑูุฎ ูู ุงูุชูููุฏ\n"
            "โซ๏ธุฅุฐุง ูุงู ูู ุฑุชุจุฉุ ุณุชุธูุฑ ูู ุงููุงุฆูุฉ"
        )
